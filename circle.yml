machine:
  node:

deployment:
  dev:
    branch: id-in-use
    commands:
      - heroku maintenance:on --app contact-organiser-dev
      - git fetch origin --unshallow
      - git push git@heroku.com:contact-organiser-dev.git $CIRCLE_SHA1:refs/heads/master
      - heroku maintenance:off --app contact-organiser-dev

  staging:
    branch: test
    commands:
      - heroku maintenance:on --app contact-organiser-test
      - git fetch origin --unshallow
      - git push git@heroku.com:contact-organiser-test.git $CIRCLE_SHA1:refs/heads/master
      - heroku maintenance:off --app contact-organiser-test

  production:
    branch: master
    commands:
      - heroku maintenance:on --app contact-organiser
      - git fetch origin --unshallow
      - git push git@heroku.com:contact-organiser.git $CIRCLE_SHA1:refs/heads/master
      - heroku maintenance:off --app contact-organiser

test:
  override:
    - touch no-tests
